<html>
<head>
<link rel="stylesheet" type="text/css" href="stylesheet.css" media="screen"></link>
<script type="text/javascript">
async function checkLiveStream(channelId, apiKey) {
  const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&eventType=live&type=video&key=${apiKey}`;
  
  try {
    const response = await fetch(url);
    const data = await response.json();
    if (data.items.length > 0) {
      const videoId = data.items[0].id.videoId;
      return videoId;
    } else {
      return null;
    }
  } catch (error) {
    console.error(error);
    return null;
  }
}
</script>
<title>This is the title</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
	@import url('http://fonts.cdnfonts.com/css/twenty-seven');
	body {
		overflow: hidden;
		background-color: rgba(0,0,0,0);
	}

	h1 {
	  color: white;
	  text-align: center;
	}
	#logo-icon-container {
	  top: 50%;
	}
	div.unavail {
	  width: 100%;
	  max-width: 100%;
	  font-family: 'TWENTY-SEVEN', sans-serif;
	  font-size: 44px;
	  text-decoration: none;
	  text-align: center; 
	}
	div.ex1 {
      color: #ffffff;
	  max-width: 100%;
	  width: 100%;
	  margin: auto;
	  text-align: center;  
	  position: absolute;
	  z-index: -2;
	  top: 50%;
	  -ms-transform: translateY(-50%);
	  transform: translateY(-50%);
	  text-shadow:
	  1px 1px 0px #ffffff,
	  1px -1px 0px #ffffff,
	  -1px 1px 0px #ffffff,
	  -1px -1px 0px #ffffff,
	  0 0 4px #bfefff,
	  0 0 6px #9fc9f7,
	  0 0 8px #76b1f3,
	  0 0 10px #4f9bf0, 
	  0 0 20px #1271da,
	  0 0 30px #1065c2,
	  0 0 40px #0e59ab;
    }
	div.ex2 {
	  color: #00c0fd;
	  max-width: 100%;
	  width: 100%;
	  margin: auto;
	  text-align: center;  
	  position: absolute;
	  z-index: -1;
	  top: 50%;
	  -ms-transform: translateY(-50%);
	  transform: translateY(-50%);
    }
	}
	</style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js" integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<div>
<script  type="text/javascript">

const channelId = 'UCN6G4inO6lIGUowpz2_czyA'; // Canal de ejemplo
const apiKey = 'AIzaSyB1jU6hshPwdtwpSJi3yjjBytK7I_Ciy10'; // Tu clave de API de Google

checkLiveStream(channelId, apiKey)
  .then(videoId => {
    if (videoId) {
      console.log(`El canal está transmitiendo en vivo. El identificador del video es: ${videoId}`);
	  window.location.replace(`https://www.youtube.com/live_chat?dark_theme=1&is_popout=1&v=${videoId}`);
    } else {
      console.log('El canal no está transmitiendo en vivo.');
	  var div = document.createElement("div");
      div.className = "unavail ex1";
      div.innerHTML = "El chat está<br>deshabilitado<br>para ésta<br>transmisión<br>en vivo.";
      var div2 = document.createElement("div");
      div2.className = "unavail ex2";
      div2.innerHTML = "El chat está<br>deshabilitado<br>para ésta<br>transmisión<br>en vivo.";

      // AÃ±adimos el nuevo div al final del body
      document.body.appendChild(div);
	  document.body.appendChild(div2);
		setInterval(function () {
		  location.reload(true);
		}, 100000);       
    }
  })
  .catch(error => {
    console.error(error);
  });

</script>
</div>
</body>
</html>